# =============================================================================
# Testing/Staging Environment Configuration Template
# =============================================================================
# This is a template for the testing environment deployed on Render.
# Copy this file to .env.testing and fill in actual values.
# IMPORTANT: Encrypt .env.testing with git-secret before committing!

# =============================================================================
# Environment Selection
# =============================================================================
DJANGO_ENVIRONMENT=testing

# =============================================================================
# Django Core Settings
# =============================================================================
DEBUG=False
SECRET_KEY=generate-unique-testing-secret-key-min-50-chars
ALLOWED_HOSTS=pss-backend-testing.onrender.com
PORT=10000

# =============================================================================
# Database (Supabase PostgreSQL)
# =============================================================================
# Get these values from your Supabase project settings
DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres

# =============================================================================
# Supabase Storage
# =============================================================================
# Get these from Supabase Project Settings â†’ API
SUPABASE_URL=https://[PROJECT-REF].supabase.co
SUPABASE_KEY=your-supabase-anon-or-service-role-key
SUPABASE_STORAGE_BUCKET=pss-testing-media

# =============================================================================
# PII Encryption (POPIA Compliance)
# =============================================================================
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# IMPORTANT: Use a DIFFERENT key than production
FIELD_ENCRYPTION_KEY=generate-unique-testing-encryption-key-base64

# =============================================================================
# Frontend Configuration
# =============================================================================
FRONTEND_URL=https://pss-frontend-testing.vercel.app
CORS_ALLOWED_ORIGINS=https://pss-frontend-testing.vercel.app
CSRF_TRUSTED_ORIGINS=https://pss-frontend-testing.vercel.app

# =============================================================================
# Email Configuration
# =============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=apikey
EMAIL_HOST_PASSWORD=your-sendgrid-api-key
DEFAULT_FROM_EMAIL=testing@capaciti.org.za

# Email notifications
ADMIN_NOTIFICATION_EMAIL=admin@capaciti.org.za
EMAIL_QUEUE_ENABLED=False
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY_SECONDS=30

# =============================================================================
# CAPTCHA Configuration (Google reCAPTCHA v3)
# =============================================================================
# You can use the same CAPTCHA keys as production or create separate testing keys
CAPTCHA_ENABLED=True
CAPTCHA_PROVIDER=recaptcha
CAPTCHA_TRIGGER_THRESHOLD=5
RECAPTCHA_PUBLIC_KEY=your-recaptcha-site-key
RECAPTCHA_PRIVATE_KEY=your-recaptcha-secret-key
RECAPTCHA_REQUIRED_SCORE=0.5

# =============================================================================
# Security Settings (Production-like for testing)
# =============================================================================
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# =============================================================================
# Optional: Celery/Redis (if using email queue)
# =============================================================================
# CELERY_BROKER_URL=redis://localhost:6379/0
# CELERY_RESULT_BACKEND=redis://localhost:6379/0

# =============================================================================
# Notes:
# - This environment uses Supabase for both database and file storage
# - All files uploaded will go to Supabase Storage bucket
# - Frontend developers will test against this environment
# - Security settings mirror production for realistic testing
# =============================================================================
